"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m="akinator_game",c={type:"function",name:m,description:"Play an Akinator-style guessing game. You ask yes/no questions to guess what the user is thinking of (a character, person, animal, object, or place). Try to guess in as few questions as possible!",parameters:{type:"object",properties:{action:{type:"string",enum:["start","answer","guess","reveal"],description:"Game action: 'start' to begin a new game, 'answer' to record user's answer to your question, 'guess' to make a guess, 'reveal' when user reveals the answer"},category:{type:"string",enum:["character","person","animal","object","place"],description:"Category of thing to guess (required for 'start')"},answer:{type:"string",enum:["yes","no","probably_yes","probably_no","unknown"],description:"User's answer to your question (for 'answer' action)"},guess:{type:"string",description:"Your guess of what the user is thinking (for 'guess' action)"},wasCorrect:{type:"boolean",description:"Whether your guess was correct (for 'reveal' action)"},actualAnswer:{type:"string",description:"The actual answer if your guess was wrong (for 'reveal' action)"}},required:["action"]}},p=`You are playing an Akinator-style guessing game. Your goal is to guess what the user is thinking of by asking strategic yes/no questions.

Game Rules:
1. The user thinks of something in a category (character, person, animal, object, or place)
2. You ask yes/no questions to narrow down possibilities
3. The user answers: ã¯ã„ (yes), ã„ã„ãˆ (no), ãŸã¶ã‚“ã¯ã„ (probably yes), ãŸã¶ã‚“ã„ã„ãˆ (probably no), or ã‚ã‹ã‚‰ãªã„ (unknown)
4. Try to guess correctly in as few questions as possible (20 questions max)
5. When confident, make a guess using the 'guess' action

Strategy Tips:
- Start with broad questions to narrow categories (Is it real? Is it alive? Is it from Japan?)
- Use binary search style questioning to eliminate half the possibilities
- Pay attention to all previous answers
- Make educated guesses based on accumulated information

When asking questions, call the tool with action='answer' and include your question in the message.
When ready to guess, call the tool with action='guess' and your guess.

Remember: The fewer questions you ask, the higher the score!`,f=[{name:"ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼",args:{action:"start",category:"character"}},{name:"æœ‰åäºº",args:{action:"start",category:"person"}},{name:"å‹•ç‰©",args:{action:"start",category:"animal"}},{name:"ã‚‚ã®",args:{action:"start",category:"object"}},{name:"å ´æ‰€",args:{action:"start",category:"place"}}],d=t=>{switch(t){case"character":return"ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼";case"person":return"æœ‰åäºº";case"animal":return"å‹•ç‰©";case"object":return"ã‚‚ã®";case"place":return"å ´æ‰€"}},A=t=>({phase:"questioning",category:t,questionCount:0,maxQuestions:20,qaHistory:[],message:`ðŸ”® ${d(t)}ã‚’å½“ã¦ã¾ã™ï¼ä½•ã‹1ã¤æ€ã„æµ®ã‹ã¹ã¦ãã ã•ã„ã€‚æº–å‚™ãŒã§ããŸã‚‰æ•™ãˆã¦ã­ï¼`}),T=(t,g)=>g?t<=5?100:t<=10?80:t<=15?60:t<=20?40:20:0,b=async(t,g)=>{const{action:l,category:w,answer:i,guess:u,wasCorrect:n,actualAnswer:h}=g,s=t.currentResult?.data?.state;try{let e,r,a;switch(l){case"start":{if(!w)throw new Error("Category is required to start the game");e=A(w),r=`Game started! Category: ${d(w)}. Ask your first yes/no question to start narrowing down. Use broad questions first (e.g., "Is it a real person?" or "Is it from Japan?"). After asking, call the tool with action='answer' to record the user's response.`,a=["Ask a yes/no question, then call with action='answer' when user responds"];break}case"answer":{if(!s)throw new Error("No active game. Start a new game first.");if(!i)throw new Error("Answer is required");e={...s,questionCount:s.questionCount+1,qaHistory:s.currentQuestion?[...s.qaHistory,{question:s.currentQuestion,answer:i}]:s.qaHistory,currentQuestion:void 0};const o={yes:"ã¯ã„",no:"ã„ã„ãˆ",probably_yes:"ãŸã¶ã‚“ã¯ã„",probably_no:"ãŸã¶ã‚“ã„ã„ãˆ",unknown:"ã‚ã‹ã‚‰ãªã„"}[i];if(e.message=`ðŸ“ å›žç­”: ${o} (è³ªå• ${e.questionCount}/${e.maxQuestions})`,e.questionCount>=e.maxQuestions)e.phase="guessing",r=`You've reached the maximum ${e.maxQuestions} questions! Based on all the answers, make your best guess now using action='guess'.`,a=["guess"];else{const q=e.qaHistory.map((y,k)=>`Q${k+1}: ${y.question} â†’ ${y.answer}`).join(`
`);r=`Answer recorded: ${i}. Question history:
${q}

Analyze all answers and either:
1. Ask another strategic question (then call action='answer' when user responds)
2. If confident, make a guess with action='guess'`,a=["Ask another question","guess"]}break}case"guess":{if(!s)throw new Error("No active game. Start a new game first.");if(!u)throw new Error("Guess is required");e={...s,phase:"guessing",guess:u,message:`ðŸŽ¯ ç§ã®äºˆæƒ³ã¯... ã€Œ${u}ã€ã§ã™ï¼

å½“ãŸã£ã¦ã„ã¾ã™ã‹ï¼Ÿ`},r=`You guessed "${u}". Wait for the user to confirm if it's correct. When they respond, call action='reveal' with wasCorrect=true/false. If wrong, include actualAnswer with what they were thinking of.`,a=["reveal (with wasCorrect and optionally actualAnswer)"];break}case"reveal":{if(!s)throw new Error("No active game. Start a new game first.");if(n===void 0)throw new Error("wasCorrect is required");const o=T(s.questionCount,n);e={...s,phase:"result",isCorrect:n,score:o,message:n?`ðŸŽ‰ æ­£è§£ï¼ ${s.questionCount}å•ã§å½“ã¦ã¾ã—ãŸï¼
â­ ã‚¹ã‚³ã‚¢: ${o}ç‚¹`:`ðŸ˜… æ®‹å¿µï¼æ­£è§£ã¯ã€Œ${h||"???"}ã€ã§ã—ãŸã€‚
æ¬¡ã¯é ‘å¼µã‚Šã¾ã™ï¼`},r=n?`Congratulations! You guessed correctly in ${s.questionCount} questions! Score: ${o}. Celebrate with the user and offer to play again.`:`Your guess was wrong. The answer was "${h}". Acknowledge this gracefully and offer to play again.`,a=["start (to play again)"];break}default:throw new Error(`Unknown action: ${l}`)}return{toolName:c.name,data:{state:e,message:e.message},jsonData:{state:e,availableActions:a,instructions:r},message:e.message,instructions:r,updating:l!=="start",instructionsRequired:!0}}catch(e){return console.error("Akinator game error",e),{toolName:c.name,message:`ã‚¨ãƒ©ãƒ¼: ${e instanceof Error?e.message:"Unknown error"}`,instructions:"An error occurred. Ask the user if they want to start a new game."}}},$={toolDefinition:c,execute:b,generatingMessage:"ðŸ”® è€ƒãˆä¸­...",isEnabled:()=>!0,samples:f,systemPrompt:p};exports.SAMPLES=f;exports.SYSTEM_PROMPT=p;exports.TOOL_DEFINITION=c;exports.TOOL_NAME=m;exports.executeAkinator=b;exports.pluginCore=$;
